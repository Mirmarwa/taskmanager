{% extends 'base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
<h1 class="mb-4">Dashboard</h1>

<ul>
    <li>À faire : {{ todo }}</li>
    <li>En cours : {{ doing }}</li>
    <li>Terminé : {{ done }}</li>
</ul>

{% if todo + doing + done > 0 %}
    <div id="chart_div" style="width:100%; height:400px;"></div>
{% else %}
    <p class="text-muted">Aucune tâche pour le moment</p>
{% endif %}

{% endblock %}

{% block javascripts %}
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
    var data = google.visualization.arrayToDataTable([
        ['Statut', 'Tâches'],
        ['À faire', {{ todo }}],
        ['En cours', {{ doing }}],
        ['Terminé', {{ done }}]
    ]);

    var options = {
        title: 'Répartition des tâches'
    };

    var chart = new google.visualization.PieChart(
        document.getElementById('chart_div')
    );
    chart.draw(data, options);
}
</script>
{% endblock %}
